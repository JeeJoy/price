<?php	$xmlfile = $_SERVER['DOCUMENT_ROOT']."/data/rules.xml";	function createRule($provider, $from, $text, $textinfilename, $subject, $newfilename, $path) {		if (!$provider or !$from or !$subject or !$newfilename or !$path)			return 1;			global $xmlfile;			// Если файл отсутствует, то создаем и заполняем		if (!file_exists ($_SERVER['DOCUMENT_ROOT'].$xmlfile)) {			$xml=new DomDocument('1.0','utf-8');			$rules = $xml->appendChild($xml->createElement('Rules'));						$service = $rules->appendChild($xml->createElement('Service'));			$id = $service->appendChild($xml->createElement('ID'));			$value = $id->appendChild($xml->createAttribute('Value'));			$value->value = 1;						$ruleCollection = $rules->appendChild($xml->createElement('RuleCollection'));						$xml->formatOutput = true;			$xml->save($_SERVER['DOCUMENT_ROOT'].$xmlfile);		}				// Создаем правило		$xml = simplexml_load_file($xmlfile);				$ruleNode = $xml->RuleCollection->addChild('Rule');		// ID		$ID = (int)$xml->Service->ID['Value'];		$ruleNode->addAttribute('ID', $ID);		$xml->Service->ID['Value'] = $ID+1;		// Name of provider		$ruleNode->addAttribute('Provider', $provider);		$ruleNode->addAttribute('From', $from);		$ruleNode->addAttribute('Text', $text);		$ruleNode->addAttribute('TextInFilename', $textinfilename);		$ruleNode->addAttribute('Subject', $subject);		$ruleNode->addAttribute('NewFilename', $newfilename);		$ruleNode->addAttribute('Path', $path);		//$ruleNode->addChild('name', 'User');		$xml->asXML($xmlfile);	}		function loadRules() {		global $xmlfile;				if (file_exists($xmlfile)) {				$result[] = array();						$xml = simplexml_load_file($xmlfile);						$i = 0;			foreach ($xml->RuleCollection->children() as $key => $Rule)			{				$result[$i]['ID'] = (string)$Rule['ID'];				$result[$i]['Provider'] = (string)$Rule['Provider'];				$result[$i]['From'] = (string)$Rule['From'];				$result[$i]['Text'] = (string)$Rule['Text'];				$result[$i]['TextInFilename'] = (string)$Rule['TextInFilename'];				$result[$i]['Subject'] = (string)$Rule['Subject'];				$result[$i]['NewFilename'] = (string)$Rule['NewFilename'];				$result[$i]['Path'] = (string)$Rule['Path'];				$i++;			}						return $result;		}	}?>